_Статья исходит из того, что:_
1. Не используются нестандартные инструменты управления пакетами (Anaconda, Poetry (pyproject.toml); nvm, Yarn, pnpm и т.д.)   
2. Используется Unix-подобная система
3. Используется PyCharm или VS Code
4. Предполагается развёртывание при помощи Git и Docker

*Лучше если предварительно будут пройдены 2 официальных урока:*  
- https://docs.djangoproject.com/en/5.2/intro/tutorial01/  
- https://docs.djangoproject.com/en/5.2/intro/tutorial02/

# Подготовка

Пусть будет отдельная папка для веб-проектов `www`, и папка с одноимёнными окружениями под проекты `env`

1. Создаём в `www` единую папку под бэк и фронт проекта `myproject`
2. В `myproject` сразу создаём пустой `.gitignore`, сразу стоит указать там `db.sqlite3`

# Установка Django (5.2.5)

Удостоверяемся, что в системе есть последняя версия питона https://www.python.org/downloads/
— Можно просто скачать инсталлер, в систему просто добавится ещё один питон
— Возможно свежеустановленный питон не будет сразу доступен в консоле по `pythonX.XX` — погуглить на стэковерфлоу
— Всё это с учётом, что не пользуемся какой-нибудь Anaconda

1. Создаём одноимённое вируальное окружение в папке `env`
   $ cd ~/Documents/env/
   $ pythonX.XX -m venv myproject
   — Можно было бы и просто в корне проекта, но тогда нужно будет добавлять окружения всех участников в `.gitignore`; также это просто усложняет поиск по директории проекта
2. Активируем окружение
   $ source ~/Documents/env/myproject/bin/activate
3. Устанавливаем Django
   $ pip install django
4. В папке с проектом создаём Django-сервис `api`
   $ cd ~/Documents/www/myproject/
   $ django-admin startproject api
5. Проверить
   $ python manage.py runserver

# Базовая настройка Django

1. Переименовываем папку `api/api` в `api/conf`, чтобы не путаться.
   — Раньше такую папку называли `core`, но т.к. core стал термином DDD и теперь означает совсем другое, выбираем — `conf`.
2. Глобальным поиском по проекту переименовываем все пути вида `api.xxx` в `conf.xxx`
3. В `api` создадим питоновский пакет `stem` (просто папка с пустым `__init__.py` внутри) для центрального аппликейшена, для описания базовых/глобальных функций проекта, которые нельзя отнести к конкретному модулю (api к csrf и т.д.).
   — Эту папку тоже любили называть `core`, который также более не подходит, один из синонимов — `stem`.
4. В `api` создадим пакет `apps` для апликейшенов проекта.
5. В `api` сразу создаём файл `requirements.txt` для зависимостей, добавляем туда `Django==X.X.X`
   $ pip freeze | grep -i django >> requirements.txt
6. Опционально, в `api` сразу создаём пока пустые`.gitignore`, `.dockerignore`

# Создание локальных настроек Django

1. В `conf` создаём `settings_local.py` и `settings_local.py.tmpl`
2. `settings_local.py` можно сразу добавить в `api/.gitignore`
3. В `settings.py` отступаем 2 строки от последнего правила и вставляем:
```
# CUSTOM

# ...

# Local Settings

from .settings_local import *
```
   — `# Local Settings` будут всегда последней строчкой
4. Опционально, в `settings_local.py` описываем подключение к Postgres
   (https://docs.djangoproject.com/en/5.2/ref/databases/#postgresql-notes)
   — Там же позже будем управлять `DEBUG = True` и т.д. 

— Позже, у сервера (и у коллег) будет свой `settings_local.py` на основе `settings_local.py.tmpl`
— Соответственно `settings_local.py.tmpl` по мере неоходимости стоит обновлять, забивая credentials "рыбой", т.к. он будет в Git
— Важная настройка `SECRET_KEY` (соль для паролей) будет храниться в серверном `settings_local.py`. (В случае хранения в `.env` учесть что в значениях нельзя использовать `$`).

# Настройка IDE

В случае использования PyCharm:
1. Пометим директорию `api` как 'Sources Root', чтобы IDE понимала импорты
2. В настройках укажем пути к корню проекту Django (django support) `myproject/api` и к настройкам `myproject/api/conf/settings.py`
3. В настройках укажем пути к окружению (python interpreter) `env/myproject/bin/python`
4. Опционально добавить конфигурацию быстрого запуска и дебага.
